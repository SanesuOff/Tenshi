<div class="dashboard-container">
    <div class="dashboard-header">
        <h1>Dashboard</h1>
        <p>Gérez vos serveurs Discord avec Tenshi Bot</p>
    </div>

    <div class="servers-grid">
        <% if (guilds && guilds.length > 0) { %>
            <% guilds.forEach(guild => { %>
                <div class="server-card">
                    <div class="server-header">
                        <img src="https://cdn.discordapp.com/icons/<%= guild.id %>/<%= guild.icon %>.png" 
                             alt="<%= guild.name %>" 
                             class="server-icon"
                             onerror="this.src='/images/default-server.png'">
                        <div class="server-info">
                            <h3><%= guild.name %></h3>
                            <p class="server-id">ID: <%= guild.id %></p>
                        </div>
                    </div>
                    <div class="server-actions">
                        <% if (client.guilds.cache.has(guild.id)) { %>
                            <a href="/dashboard/<%= guild.id %>" class="btn btn-primary">
                                <i class="fas fa-cog"></i>
                                Configurer
                            </a>
                        <% } else { %>
                            <a href="https://discord.com/api/oauth2/authorize?client_id=<%= config.clientId %>&permissions=8&scope=bot%20applications.commands&guild_id=<%= guild.id %>" 
                               class="btn btn-secondary" target="_blank">
                                <i class="fas fa-plus"></i>
                                Ajouter le Bot
                            </a>
                        <% } %>
                    </div>
                </div>
            <% }); %>
        <% } else { %>
            <div class="no-servers">
                <i class="fas fa-server"></i>
                <h3>Aucun serveur trouvé</h3>
                <p>Vous devez être administrateur d'au moins un serveur pour utiliser le dashboard.</p>
            </div>
        <% } %>
    </div>

    <div class="dashboard-stats">
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-server"></i>
                </div>
                <div class="stat-content">
                    <h3><%= client.guilds.cache.size %></h3>
                    <p>Serveurs avec le bot</p>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-content">
                    <h3><%= client.users.cache.size %></h3>
                    <p>Utilisateurs totaux</p>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-content">
                    <h3>En ligne</h3>
                    <p>Bot actif</p>
                </div>
            </div>
        </div>
    </div>
</div> 